spring:
  cloud:
    gateway:
      # Default filters applied to all routes - forwards JWT to downstream services
      default-filters:
        - DedupeResponseHeader=Access-Control-Allow-Origin Access-Control-Allow-Credentials, RETAIN_UNIQUE
      server:
        webflux:
          globalcors:
            cors-configurations:
              '[/**]':
                allowedOrigins: "http://localhost:4200"
                allowedHeaders:
                  - Authorization
                  - Content-Type
                  - Accept
                  - Origin
                  - X-Requested-With
                  - Access-Control-Request-Method
                  - Access-Control-Request-Headers
                exposedHeaders:
                  - Authorization
                allowedMethods:
                  - GET
                  - POST
                  - PUT
                  - DELETE
                  - OPTIONS
                allowCredentials: true
                maxAge: 3600




#  import org.springframework.context.annotation.Bean;
#  import org.springframework.context.annotation.Configuration;
#  import org.springframework.web.cors.CorsConfiguration;
#  import org.springframework.web.cors.reactive.CorsWebFilter;
#  import org.springframework.web.cors.reactive.UrlBasedCorsConfigurationSource;
#
#  import java.util.Arrays;
#
#  @Configuration
#  public class CorsConfig {
#
#  @Bean
#  public CorsWebFilter corsWebFilter() {
#  CorsConfiguration corsConfiguration = new CorsConfiguration();
#  // Basé sur votre configuration actuelle dans application.yml
#  corsConfiguration.setAllowedOrigins(Arrays.asList("http://localhost:4200"));
#  corsConfiguration.setAllowedHeaders(Arrays.asList("*"));
#  corsConfiguration.setAllowedMethods(Arrays.asList("GET", "POST", "PUT", "DELETE", "OPTIONS"));
#  corsConfiguration.setAllowCredentials(true); // Souvent nécessaire avec Angular
#
#  UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();
#  source.registerCorsConfiguration("/**", corsConfiguration);
#
#  return new CorsWebFilter(source);
#}
#}